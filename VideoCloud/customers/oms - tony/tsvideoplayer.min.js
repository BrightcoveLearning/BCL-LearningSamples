/**
 * @package TS OMS Widget:  HomePage Player Widget
 * @author Tony Simbine
 * @Version 20110825.TS13, updated 2011.11.15 14: 13
 * Copyright (c) 2011 and developed by Tony Simbine <ejantos (at) yahoo.com>
 * @link http: //www.oms.eu/
**/
if(typeof tsfy_id=='undefined'){
  var tsfy_id=new Array();   var tsBCUtilities=new Object(); }
function bc_tsVideoPlayer(arg){
  var id=tsfy_id.length;tsfy_id.push(new tsBcVideoPlayer(arg,id));   if(id==0)tsfy_id[id].tsLoadData();     jQuery(document).ready(function(){tsfy_id[id].generate();   }); }
function tsBcVideoPlayer(arg,id){
  this.id=id;
  this.dir=arg.dir||'.';
  this.videoId=(!arg.videoId)?0 : arg.videoId;
  this.playerId=(!arg.playerId)?0 : arg.playerId;
  this.tsStart=(arg.tsStart==null)?false : arg.tsStart;
  this.width=((!arg.width)||(arg.width&&Number(arg.width)<480))?480 : arg.width;
  this.tsPSize=(arg.tsPSize&&Number(1/arg.tsPSize))||0.75;
  this.height=Math.round(this.width*this.tsPSize);   this.tsComAdWidth=300;
  this.tsComAdHeight=250;
  this.tsBanAdWidth=728;
  this.tsBanAdHeight=90;
  this.tsPDiv=arg.tsPDiv||'tsContentPlayer';
  this.referName='HPchromsingle';
  this.tsCA=(arg.tsCA==null)?true:   arg.tsCA;
  this.tsSB=(arg.tsSB==null)?false:   arg.tsSB;
  this.tsFlyTime=2500;
  this.tsIndex=2147483646;
  this.tswmode=(arg.tswmode==null)?'':   arg.tswmode;
  this.tsDivTitle=arg.tsDivTitle||'';
  this.tsDivDesc=arg.tsDivDesc||'';
  this.tsLoadData=function(){if(this.id!=0)
  return true;if(typeof brightcove=='undefined')
  document.write('<scr'+'ipt src="http:   //admin.brightcove.com/js/BrightcoveExperiences_all.js" type="text/javascript" charset="UTF-8"></scr'+'ipt>');   if(typeof jQuery=='undefined') {
  document.write('<scr'+'ipt src="'+this.dir+'/tshpwp/ts-jquery-1.4.min.js" type="text/javascript" charset="UTF-8"></scr'+'ipt>');   document.write('<link href="'+this.dir+'/tshpwp/tsvideoplayer.css" rel="stylesheet" type="text/css" charset="UTF-8" />'); }
this.tsCreatePlayer=function(){
  var TSplayerData={'isVid':   'true','isUI':   'true','videoSmoothing':   'true','dynamicStreaming':   'true','referName':   'HPchromsingle','templateLoadHandler':   'tsBCUtilities.onTsTemplateLoaded','tsVersion':   'OHPWP-20110825.TS13'};TSplayerData['width']=this.width
  TSplayerData['height']=this.height;TSplayerData['videoId']=this.videoId;TSplayerData['@videoPlayer']=this.videoId;TSplayerData['playerID']=this.playerId;TSplayerData['autoStart']=this.tsStart;if(this.tswmode)
  TSplayerData['wmode']=this.tswmode;var TScplayer=brightcove.createElement('object');   TScplayer.id=id+'BCTS_experience';TScplayer.className='BrightcoveExperience';for(var i in TSplayerData){var tsPar=brightcove.createElement('param');   tsPar.name=i;tsPar.value=TSplayerData[i];TScplayer.appendChild(tsPar); }
if(typeof WLRCMD!='undefined'&&WLRCMD.length>3){tsPar=brightcove.createElement('param'); tsPar.name='additionalAdTargetingParams';tsPar.value=';'+WLRCMD;TScplayer.appendChild(tsPar); }else if(typeof parent.window.WLRCMD!='undefined'&&parent.window.WLRCMD.length>3){tsPar=brightcove.createElement('param'); tsPar.name='additionalAdTargetingParams';tsPar.value=';'+parent.window.WLRCMD;TScplayer.appendChild(tsPar); }
return TScplayer;}
this.generate=function(){var tsComponents=document.createElement('div'); tsComponents.id=this.id+'tsComponents';var code=document.createElement('div'); code.id=this.id+'tsPlayer';code.appendChild(this.tsCreatePlayer()); tsComponents.appendChild(code); if(this.tsCA){var tsCompanionAds=document.createElement('div'); tsCompanionAds.id=this.id+'tsCompanionAds';code=document.createElement('div'); code.innerHTML='Das Video beginnt in K&uuml;rze: ';code.setAttribute('id',this.id+'tsText'); tsCompanionAds.appendChild(code); code=document.createElement('div'); code.id=this.id+'tsCompanionAdLink';tsCompanionAds.appendChild(code); tsComponents.appendChild(tsCompanionAds); }
if(this.tsSB){code=document.createElement('div'); code.id=this.id+'tsBanner';tsComponents.appendChild(code); }
jQuery('#'+this.tsPDiv).append(tsComponents); jQuery('#'+this.id+'tsComponents').addClass('tsComponents'); jQuery('#'+this.id+'tsPlayer').addClass('tsPlayer'); jQuery('#'+this.id+'tsPlayer').css({'width': this.width+'px','height': this.height+'px'}); if(this.tsCA){jQuery('#'+this.id+'tsCompanionAds').addClass('tsCompanionAds'); jQuery('#'+this.id+'tsCompanionAds').css({'left': (5+this.width-this.tsComAdWidth)+'px','top': Math.round((this.height-this.tsComAdHeight-20)/2)+'px','width': this.tsComAdWidth+'px','height': (20+this.tsComAdHeight)+'px'}); jQuery('#'+this.id+'tsText').addClass('tsText'); }
if(this.tsSB){jQuery('#'+this.id+'tsBanner').addClass('tsBanner'); jQuery('#'+this.id+'tsBanner').css({'max-width': this.tsBanAdWidth+'px','max-height': this.tsBanAdHeight+'px'}); }
brightcove.createExperiences(); }}
tsBCUtilities.getTsXMLDoc=function(tsEvent){var adXML=null;if(tsEvent.indexOf('<a ')!==-1)
return adXML;try{if(window.ActiveXObject){adXML=new ActiveXObject('Microsoft.XMLDOM'); adXML.async=false;adXML.loadXML(tsEvent); }else{if(window.XMLHttpRequest)
adXML=(new DOMParser()).parseFromString(tsEvent,'text/xml'); }}catch(e){adXML=null;}
return adXML;}
tsBCUtilities.getTsVideoAd=function($adXML){var videoAd=new Object(); var $adNode=$adXML.find(': first'); var tsAr,tsX;if($adNode.attr('duration'))
videoAd.duration=$adNode.attr('duration'); else
return null;videoAd.trackStartURLs=$adNode.attr('trackStartURLs').split(','); tsAr=$adNode.attr('trackMidURLs').split(','); if(tsAr)videoAd.trackMidURLs=tsAr;tsAr=$adNode.attr('trackEndURLs').split(','); if(tsAr)videoAd.trackEndURLs=tsAr;tsAr=$adNode.attr('trackPointURLs').split(','); if(tsAr)videoAd.trackPointURLs=tsAr;videoAd.trackPointTime=$adNode.attr('trackPointTime'); tsAr=$adNode.attr('trackFirstQuartileURLs')?$adNode.attr('trackFirstQuartileURLs').split(','): null;if(tsAr)videoAd.trackFirstQuartileURLs=tsAr;tsAr=$adNode.attr('trackThirdQuartileURLs')?$adNode.attr('trackThirdQuartileURLs').split(','): null;if(tsAr)videoAd.trackThirdQuartileURLs=tsAr;tsAr=$adNode.attr('trackFullscreenURLs')?$adNode.attr('trackFullscreenURLs').split(','): null;if(tsAr)videoAd.trackFullscreenURLs=tsAr;tsAr=$adNode.attr('trackExitFullscreenURLs')?$adNode.attr('trackExitFullscreenURLs').split(','): null;if(tsAr)videoAd.trackExitFullscreenURLs=tsAr;tsAr=$adNode.attr('trackPauseURLs')?$adNode.attr('trackPauseURLs').split(','): null;if(tsAr)videoAd.trackPauseURLs=tsAr;tsAr=$adNode.attr('trackResumeURLs')?$adNode.attr('trackResumeURLs').split(','): null;if(tsAr)videoAd.trackResumeURLs=tsAr;tsAr=$adNode.attr('trackMuteURLs')?$adNode.attr('trackMuteURLs').split(','): null;if(tsAr)videoAd.trackMuteURLs=tsAr;tsAr=$adNode.attr('trackUnmuteURLs')?$adNode.attr('trackUnmuteURLs').split(','): null;if(tsAr)videoAd.trackUnmuteURLs=tsAr;tsX=$adXML.find('videoURL')?$adXML.find('videoURL').text(): null;if(tsX){videoAd.type='videoAd';videoAd.videoURL=tsX;tsX=$adXML.find('videoClickURL')?$adXML.find('videoClickURL').text(): '';videoAd.videoClickURL=tsX;}else{tsX=$adXML.find('overlayURL')?$adXML.find('overlayURL').text(): '';if(tsX){videoAd.type='overlay';videoAd.overlayURL=tsX;tsX=$adXML.find('overlayClickURL')?$adXML.find('overlayClickURL').text(): '';videoAd.overlayClickURL=tsX;}else{videoAd=null;}}
return videoAd;}
tsBCUtilities.getTsCollapsedBanner=function($adXML){var videoAd,tsAr;var $adNode=$adXML.find('collapsedBannerURL'); if($adNode){tsAr=$adNode.text(); if(tsAr.indexOf('/Placeholder/')>-1)
return null;videoAd=new Object(); videoAd.collapsedBannerURL=tsAr;tsAr=$adNode.attr('trackStartURLs')?$adNode.attr('trackStartURLs').split(','): null;if(tsAr)
videoAd.collapsedBannerTrackStartURLs=tsAr;videoAd.collapsedBannerClickURL=$adXML.find('collapsedBannerClickURL').text(); }
return videoAd;}
tsBCUtilities.getTsExpandedBanner=function($adXML){var videoAd,tsAr;var $adNode=$adXML.find('expandedBannerURL'); if($adNode){tsAr=$adNode.text(); if(tsAr.indexOf('/Placeholder/')>-1)
return null;videoAd=new Object(); videoAd.expandedBannerURL=tsAr;tsAr=$adNode.attr('trackStartURLs')?$adNode.attr('trackStartURLs').split(','): null;if(tsAr)
videoAd.expandedBannerTrackStartURLs=tsAr;videoAd.expandedBannerClickURL=$adXML.find('expandedBannerClickURL').text(); }
return videoAd;}
tsBCUtilities.createSwf=function(pObjectId,pBanner,ptype,pWidth,pHeight){var tsAdTxt='';if(pBanner[ptype+'TrackStartURLs']){tsAdTxt+='<div id="'+pObjectId+ptype+'TrackSwf" style="position: absolute;left: 0px;top: 0px;display: none;">';for(var i=0;i<pBanner[ptype+'TrackStartURLs'].length;i++)
tsAdTxt+='<img id="'+pObjectId+ptype+'AdTrack'+i+'" width="1" height="1" src="'+pBanner[ptype+'TrackStartURLs'][i]+'" />';tsAdTxt+='</div>';}
pBanner[ptype+'URL']+=((pBanner[ptype+'URL'].indexOf('?')!==-1)?'&': '?')+'clickTag='+encodeURIComponent(pBanner[ptype+'ClickURL']); tsAdTxt+='<object id="'+pObjectId+ptype+'Obj" classid="clsid: D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http: //download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,47,0" width="'+pWidth+'" height="'+pHeight+'" type="application/x-shockwave-flash" id="bannerAd" data="'+pBanner[ptype+'URL']+'" align="middle">'+"\n";tsAdTxt+='<param name="allowScriptAccess" value="always" /><param name="movie" value="'+pBanner[ptype+'URL'];tsAdTxt+='" /><param name="quality" value="high" /><param name="bgcolor" value="#ffffff" /><param name="wmode" value="transparent" />';tsAdTxt+='<param name="FlashVars" value="clickTag='+pBanner[ptype+'ClickURL']+'" />'+"\n";tsAdTxt+='<embed src="'+pBanner[ptype+'URL']+'" quality="high" bgcolor="#ffffff" width="'+pWidth+'" height="'+pHeight+'" name="'+pObjectId+ptype+'Emb" align="middle" allowScriptAccess="always" wmode="transparent" type="application/x-shockwave-flash" pluginspage="http: //www.macromedia.com/go/getflashplayer" FlashVars="clickTag='+pBanner[ptype+'ClickURL']+'" />'+"\n";tsAdTxt+='</object>';return tsAdTxt;}
tsBCUtilities.createImage=function(pObjectId,pBanner,ptype,pWidth,pHeight){var tsAdTxt='';if(pBanner[ptype+'TrackStartURLs']){tsAdTxt+='<div id="'+pObjectId+ptype+'TrackImg" style="position: absolute;left: 0px;top: 0px;display: none;">';for(var i=0;i<pBanner[ptype+'TrackStartURLs'].length;i++)
tsAdTxt+='<img id="'+pObjectId+ptype+'AdTrack'+i+'" width="1" height="1" src="'+pBanner[ptype+'TrackStartURLs'][i]+'" />';tsAdTxt+='</div>';}
tsAdTxt+='<a style="border: 0px;padding: 0px;margin: 0px;" id="'+pObjectId+ptype+'Ad" href="'+pBanner[ptype+'ClickURL']+'" target="_blank" ><img style="border: 0px;padding: 0px;margin: 0px;" width="'+pWidth+'" height="'+pHeight+'" src="'+pBanner[ptype+'URL']+'" /></a>';return tsAdTxt;}
tsBCUtilities.onTsExternalAd=function(tsEvent,tsExpID){var id='aa';if(tsExpID.match(/^(\d+)/)!=null)
id=RegExp.$1;else
return(true); var player=brightcove.getExperience(tsExpID); var adModule=player.getModule(APIModules.ADVERTISING); var domAdXML=tsBCUtilities.getTsXMLDoc(tsEvent.ad); if(domAdXML==null||typeof domAdXML!='object'){adModule.resumeAfterExternalAd(); return null;}
var $domAdXML=jQuery(domAdXML); var videoAd=tsBCUtilities.getTsVideoAd($domAdXML); if((!videoAd)||videoAd==null||(videoAd.videoURL!=null&&videoAd.videoURL.length<10)){adModule.resumeAfterExternalAd(); return null;}
var tsAd='';var expandedBannerAd=tsBCUtilities.getTsExpandedBanner($domAdXML); var tsShow=false;jQuery('#'+id+'tsComponents').css('z-index',tsfy_id[id].tsIndex+1); if(expandedBannerAd!=null&&expandedBannerAd.expandedBannerURL!=null&&expandedBannerAd.expandedBannerURL.length>10){if(expandedBannerAd.expandedBannerURL.indexOf('.swf')!==-1)
tsAd=tsBCUtilities.createSwf(id+'companionAd',expandedBannerAd,'expandedBanner',tsfy_id[id].tsComAdWidth,tsfy_id[id].tsComAdHeight); else
tsAd=tsBCUtilities.createImage(id+'companionAd',expandedBannerAd,'expandedBanner',tsfy_id[id].tsComAdWidth,tsfy_id[id].tsComAdHeight); tsShow=true;jQuery('#'+id+'tsPlayer').css('z-index',tsfy_id[id].tsIndex+1); jQuery('#'+id+'tsCompanionAdLink').html(tsAd); jQuery('#'+id+'tsCompanionAds').show(); jQuery('#'+id+'tsCompanionAds').animate({left: '+='+tsfy_id[id].tsComAdWidth},tsfy_id[id].tsFlyTime); }
tsAd='';var collapsedBannerAd=tsBCUtilities.getTsCollapsedBanner($domAdXML); if(collapsedBannerAd!=null&&collapsedBannerAd.collapsedBannerURL!=null&&collapsedBannerAd.collapsedBannerURL.length>10){if(collapsedBannerAd.collapsedBannerURL.indexOf('.swf')!==-1)
tsAd=tsBCUtilities.createSwf(id+'bannerAd',collapsedBannerAd,'collapsedBanner',tsfy_id[id].tsBanAdWidth,tsfy_id[id].tsBanAdHeight); else
tsAd=tsBCUtilities.createImage(id+'bannerAd',collapsedBannerAd,'collapsedBanner',tsfy_id[id].tsBanAdWidth,tsfy_id[id].tsBanAdHeight); if(!tsShow)
jQuery('#'+id+'tsPlayer').css('z-index',tsfy_id[id].tsIndex+1); tsShow=true;jQuery('#'+id+'tsBanner').html(tsAd); jQuery('#'+id+'tsBanner').show(); }
adModule.showAd(videoAd); }
tsBCUtilities.onTsMediaChange=function(tsEvent,tsExpID){var id='aa';if(tsExpID.match(/^(\d+)/)!=null)
id=RegExp.$1;else
return(true); if(tsfy_id[id].tsDivTitle&&jQuery('#'+tsfy_id[id].tsDivTitle)){jQuery('#'+tsfy_id[id].tsDivTitle).text(tsEvent.media.displayName); jQuery('#'+tsfy_id[id].tsDivTitle).show(); }
if(tsfy_id[id].tsDivDesc&&jQuery('#'+tsfy_id[id].tsDivDesc)){jQuery('#'+tsfy_id[id].tsDivDesc).text(tsEvent.media.shortDescription); jQuery('#'+tsfy_id[id].tsDivDesc).show(); }}
tsBCUtilities.onTsAdComplete=function(tsEvent,tsExpID){
  var id='aa';
  if(tsExpID.match(/^(\d+)/)!=null)
id=RegExp.$1;
else return(true); jQuery('#'+id+'tsCompanionAds').animate({left: '-='+tsfy_id[id].tsComAdWidth},tsfy_id[id].tsFlyTime); jQuery('#'+id+'tsCompanionAds').hide(); jQuery('#'+id+'tsBanner').hide(); jQuery('#'+id+'tsPlayer').css('z-index','inherit'); jQuery('#'+id+'tsComponents').css('z-index','inherit'); }
tsBCUtilities.onTsTemplateLoaded=function(tsExpID){if(tsExpID.match(/^\d+/)==null)
return(true); var bcExp=brightcove.getExperience(tsExpID); var bc_player=bcExp.getModule(APIModules.VIDEO_PLAYER); if(bc_player)
bc_player.addEventListener(BCMediaEvent.CHANGE,function(evt){tsBCUtilities.onTsMediaChange(evt,tsExpID); }); var adModule=bcExp.getModule(APIModules.ADVERTISING); if (adModule) {
  adModule.enableExternalAds(true);   adModule.addEventListener(BCAdvertisingEvent.EXTERNAL_AD,function(evt){
    tsBCUtilities.onTsExternalAd(evt,tsExpID); }); adModule.addEventListener(BCAdvertisingEvent.AD_COMPLETE,function(evt){
  tsBCUtilities.onTsAdComplete(evt,tsExpID); }); }
if(typeof tsHPCustomer=='function')tsHPCustomer(tsExpID); }