<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>New Player and Add Source</title>
</head>
<body>

  <div id="injectionDiv">
  </div>

<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.min.js"></script>
<script type="text/javascript">
  var account_id="1507807800001",
  displayPlayersTemplate = "<ul>{{#each players}}<li>{{name}}</li>{{/each}}</ul>";
    bc_access_token="AH-otYIB3BALHYYhesHiuITkhWcaIOhq0H92P8kFFJS_3hJgle5AIsOxSgZ3TzyIKfhEkrGQLmB7KU52_x7HHMqdE6eMeXOMFCYGGaX_iiPMkn-dcV2qeyQBU_cIX7zngj8R9QuZG7T1cI-FvmC5DrjW7Q9NzqhoIKHFHCuldZqQJXU10wC5Mq1cgZNTCUrhqcvUj9X7uImRXFPiMyTLeew6zX91phpoY5g4CuEfchyg8j32Sc7jOLEu2VMjHt0ItPdiZuVP2cepneFYgZ4tSXGLNQ8b0WgWcdmE32GT7WlgWhTqDpXSIKY0ElSZpgR8GOAjb6GLZJ3UyOpvQoXGNNeo54tU3lzLVSuKZvn5M42tRZheCYjGAwbLN3atHKRNGjZ5TTtT3QSC-dki-gQ0_SqZPLHLT3tmA0Dpo667Bl-YK71uky9O8bfgYApyuCkORFotH__hWhnZzRlmEgiSVdWDKKrKRbYfQPl9Zxwx7_dJmqV7uynrrK2wQY8HGZ3wrIa_NHnAcXfLm-8nTdTOkm5jocXaPEplRhGRgg7JzR9tNzOJ7s4Qi_5XuhWB5Pkw62OaWpwdySCwWVpMvWWO80yWkkzuQe2QtyMFCm_VwhnVsKv9yPjrx3zpK7xNZiQRiCNtwqnaZeA-uWL_CR2OIPKzml2WH-AsXiisCkHYatu7zKY3djw6ZDOW2i_OGBlQYCseSxUAv1unYRjiHJPdSW86Kh5wjG_0r-6JySgTmcTugx5h_3NgSTxtqMTDyW-JlD_W2OzkpFn0YJK0XRu231cboISF14uPAl7CfwkAxb1HBuctg6bSXmnXlY_Qr1oA1kzATUc3XDBhdn0_UBjawS5o1OxOg7vzpqg2yBV_oo2XWEUIV76loT_1bpGGIvX9IAB9RLUKM6ZC5hkgSwdbpox2nB9AHXI9HOxOq7E6pLtDeKXYtu8EBGzJt-9g8__20C-_Aj64Cyl4qe6dQzhae6XesaOhMUaYP8WgaLk21carpY8PcJG10bOioqgvhHuw-4_ETbwIhkfsMmDEoZ0FOU9k_yruAwFC1u1EATgQISJmLKQn43E-PviBQgXcr40_7yLy28rb6TuvZeWhvBqHQDTcaDXfTX4aScy4wOEhPCazglMTohpXyBPcxU2k3REcOJSU6-lEOjhUjDMJOSTmsgdLPwK5dWV0c66MIzQX06FERxHsQU6Ov0k5oO4JBN3n2YkHj2M2e6ALjMalQBerje9enAXyijh1liMPibGt4VFO7jWPy1QMxZmMW6-VE4ZPZHA6bw5ffWqKt3_jZ7pmeNU2X_M4VM2bktupfW4Q6zDERSTfX9D2bpXflFVlevQy5yVrPoddpU3nBOc_RkYL0Qx04cBeQZ0TZUAvMJCI0XPk_gcDqk_K4_zxIpChkUfkirZ5p9GtZh03Ok-1wtqI2oPORsKiHm2GPDoiAThEPve0Bo_1wM0-ZM8Eev5SkkrwUYPaA-wZGQB3UkFC8Jg0EsDnPdnYzP5xZg";

    var ajaxSuccess = function(data){
      console.log("success data: ");
      console.log(data);
      displayData(data);
    },

    ajaxError = function(data){
      console.log("error data: ");
      console.log(data);
    },

    makeAjaxCall = function(callURL, callType, callData){
      console.log(callData);

      if (callData) {
        $.ajax({
          type: callType,
          headers: {
            "Authorization": "Bearer " + bc_access_token,
            "Content-Type": "application/json"
          },
          url: callURL,
          data: JSON.stringify(callData),
          success: ajaxSuccess,
          error: ajaxError
        });
      } else {
        $.ajax({
          type: callType,
          headers: {
            "Authorization": "Bearer " + bc_access_token
          },
          url: callURL,
          success: ajaxSuccess,
          error: ajaxError
        });
      }
    };

    var getPlayerInfo = function(){
      call_url="https://players.api.brightcove.com/v1/accounts/" + account_id + "/players";
      makeAjaxCall(call_url, "GET", null);
    };

    var displayData = function(playerData){
      var wrapper = {players: playerData},
        template = Handlebars.compile(displayPlayersTemplate),
        dynamicHTML = template(wrapper);
      document.getElementById("injectionDiv").innerHTML = dynamicHTML;
    };

  getPlayerInfo();
</script>

</body>
</html>
