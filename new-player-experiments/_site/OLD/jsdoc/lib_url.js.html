

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: lib/url.js | Gallery</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">
    <link type="text/css" rel="stylesheet" href="styles/videojs.css">

    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="width: 50px; height: 50px">
        
            <img src="https://brightcovelearning.github.io/Brightcove-API-References/brightcove-player/doc-header-image/bc-logo.png" width="100%" height="100%">
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">Gallery</a></h1>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
    <div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="ClientApi.html">ClientApi</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ClientApi_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ClientApi.html#getAllVideos">getAllVideos</a></li><li><a href="ClientApi.html#getCurrentState">getCurrentState</a></li><li><a href="ClientApi.html#getCurrentVideo">getCurrentVideo</a></li><li><a href="ClientApi.html#off">off</a></li><li><a href="ClientApi.html#on">on</a></li><li><a href="ClientApi.html#once">once</a></li></ul><div class="member-type">Events</div><ul class="inner"><li><a href="ClientApi.html#event:interactionCardPanelClose">interactionCardPanelClose</a></li><li><a href="ClientApi.html#event:interactionCardPanelOpen">interactionCardPanelOpen</a></li><li><a href="ClientApi.html#event:interactionClick">interactionClick</a></li><li><a href="ClientApi.html#event:interactionEnd">interactionEnd</a></li><li><a href="ClientApi.html#event:interactionStart">interactionStart</a></li><li><a href="ClientApi.html#event:playerChanged">playerChanged</a></li><li><a href="ClientApi.html#event:playerLoaded">playerLoaded</a></li><li><a href="ClientApi.html#event:stateChanged">stateChanged</a></li><li><a href="ClientApi.html#event:videoChanged">videoChanged</a></li><li><a href="ClientApi.html#event:videoLoaded">videoLoaded</a></li><li><a href="ClientApi.html#event:videoPaused">videoPaused</a></li><li><a href="ClientApi.html#event:videoStarted">videoStarted</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="ClientApi.html#~InteractivityEvent">InteractivityEvent</a></li><li><a href="ClientApi.html#~Player">Player</a></li><li><a href="ClientApi.html#~Video">Video</a></li></ul></div></li><li><a href="VideoFetcher.html">VideoFetcher</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="VideoFetcher_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="VideoFetcher.html#getVideo">getVideo</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="VideoFetcher.html#emitError">emitError</a></li><li><a href="VideoFetcher.html#emitVideos">emitVideos</a></li><li><a href="VideoFetcher.html#fetch">fetch</a></li><li><a href="VideoFetcher.html#fetchConfigurationVideos">fetchConfigurationVideos</a></li><li><a href="VideoFetcher.html#fetchLiveVodVideos">fetchLiveVodVideos</a></li><li><a href="VideoFetcher.html#fetchManualVideos">fetchManualVideos</a></li><li><a href="VideoFetcher.html#fetchPlaylistVideos">fetchPlaylistVideos</a></li><li><a href="VideoFetcher.html#isExperienceConfigValid">isExperienceConfigValid</a></li><li><a href="VideoFetcher.html#noVideos">noVideos</a></li></ul><div class="member-type">Events</div><ul class="inner"><li><a href="VideoFetcher.html#event:videoError">videoError</a></li><li><a href="VideoFetcher.html#event:videos">videos</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Global</h3><ul><li><a href="global.html#connect">connect</a></li><li><a href="global.html#deepEqual">deepEqual</a></li><li><a href="global.html#ensureExplicitProtocol">ensureExplicitProtocol</a></li><li><a href="global.html#ensureProtocol">ensureProtocol</a></li><li><a href="global.html#escapeForHtml">escapeForHtml</a></li><li><a href="global.html#escapeForRegex">escapeForRegex</a></li><li><a href="global.html#get">get</a></li><li><a href="global.html#getAllVideosFromState">getAllVideosFromState</a></li><li><a href="global.html#getCssUrl">getCssUrl</a></li><li><a href="global.html#getFontResizeFunction">getFontResizeFunction</a></li><li><a href="global.html#getFontSize">getFontSize</a></li><li><a href="global.html#getHelperTextKey">getHelperTextKey</a></li><li><a href="global.html#getIn">getIn</a></li><li><a href="global.html#getLocation">getLocation</a></li><li><a href="global.html#getMinMaxFontSizes">getMinMaxFontSizes</a></li><li><a href="global.html#getPlaylist">getPlaylist</a></li><li><a href="global.html#getPoster">getPoster</a></li><li><a href="global.html#getReferrer">getReferrer</a></li><li><a href="global.html#getSourceUrl">getSourceUrl</a></li><li><a href="global.html#getSwipeOffset">getSwipeOffset</a></li><li><a href="global.html#getSwipeVideoChange">getSwipeVideoChange</a></li><li><a href="global.html#getThumbnail">getThumbnail</a></li><li><a href="global.html#getUrlForVideo">getUrlForVideo</a></li><li><a href="global.html#getVideosArrayFromState">getVideosArrayFromState</a></li><li><a href="global.html#getVideosFromState">getVideosFromState</a></li><li><a href="global.html#getVideosFromStateForConfig">getVideosFromStateForConfig</a></li><li><a href="global.html#getVideosOrEmpty">getVideosOrEmpty</a></li><li><a href="global.html#hasProtocol">hasProtocol</a></li><li><a href="global.html#isDataProp">isDataProp</a></li><li><a href="global.html#isNonNullObject">isNonNullObject</a></li><li><a href="global.html#isSecure">isSecure</a></li><li><a href="global.html#joinStyleClassNames">joinStyleClassNames</a></li><li><a href="global.html#maxNonNull">maxNonNull</a></li><li><a href="global.html#merge">merge</a></li><li><a href="global.html#mergeIn">mergeIn</a></li><li><a href="global.html#minNonNull">minNonNull</a></li><li><a href="global.html#noVideos">noVideos</a></li><li><a href="global.html#parse">parse</a></li><li><a href="global.html#parseQueryString">parseQueryString</a></li><li><a href="global.html#remove">remove</a></li><li><a href="global.html#sameMembers">sameMembers</a></li><li><a href="global.html#selectHtmlProps">selectHtmlProps</a></li><li><a href="global.html#selectProps">selectProps</a></li><li><a href="global.html#selectSvgProps">selectSvgProps</a></li><li><a href="global.html#set">set</a></li><li><a href="global.html#setFontSizes">setFontSizes</a></li><li><a href="global.html#setIn">setIn</a></li><li><a href="global.html#shallowEqual">shallowEqual</a></li><li><a href="global.html#shallowEqualArray">shallowEqualArray</a></li><li><a href="global.html#stringify">stringify</a></li><li><a href="global.html#stringifyQuery">stringifyQuery</a></li><li><a href="global.html#toQueryString">toQueryString</a></li><li><a href="global.html#updateTextSize">updateTextSize</a></li><li class="hidden"><a href="global.html#URLParts">URLParts</a></li><li><a href="global.html#videoConfigHasChanged">videoConfigHasChanged</a></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Converts an object to a query string with the leading question mark (?)
 * @param {Object} qsObj Plain object to convert to a query string
 * @returns {string} Query string
 */
function toQueryString (qsObj) {
  const strings = Object.entries(qsObj)
    .filter(entry => entry[1] != null)
    .map(entry => entry.map(encodeURIComponent).join('='));

  return `?${strings.join('&amp;')}`;
}

/**
 * Checks whether the given URL has a protocol
 * @param {string} url The URL to check
 * @returns {boolean} Whether the URL has a protocol
 */
function hasProtocol (url) {
  return /^(?:[a-zA-Z]+:)?\/\//.test(url);
}

/**
 * Checks whether the given URL is secure
 * @param {string} url The URL to check
 * @returns {boolean} Whether the URL is secure
 */
function isSecure (url) {
  return url.indexOf('https:') === 0;
}

/**
 * Prepends 'http://' to the given URL if it doesn't already have a protocol
 * @param {string} url The URL to sanitize
 * @returns {string} URL with a guaranteed protocol
 */
function ensureProtocol (url) {
  return hasProtocol(url) ? url : `http://${url}`;
}

/**
 * Prepends 'https://' to the given URL if it uses an ambiguous protocol ('//'), otherwise ensures a protocol using
 * ensureProtocol
 *
 * @param {string} url The URL to sanitize
 * @returns {string} URL with a guaranteed explicit protocol
 */
function ensureExplicitProtocol (url) {
  if (/^\/\//.test(url)) {
    return `https:${url}`;
  }
  return ensureProtocol(url);
}

/**
 * Parses a query string into a plain object
 * @param {string} queryString Query string to parse
 * @returns {Object} Query string object
 */
function parseQueryString (queryString) {
  if (queryString &amp;&amp; queryString.indexOf('?') === 0) {
    queryString = queryString.substr(1);
  }
  if (!queryString) {
    return {};
  }

  const tuples = queryString.split('&amp;');
  return tuples.reduce((parsed, tuple) => {
    const [key, value] = tuple.replace(/\+/g, '%20')
      .split('=')
      .map((part) => decodeURIComponent(part));
    const existingValue = parsed[key];

    if (existingValue == null) {
      parsed[key] = value;
    } else {
      if (Array.isArray(existingValue)) {
        existingValue[existingValue.length] = value;
      } else {
        parsed[key] = [existingValue, value];
      }
    }

    return parsed;
  }, {});
}

/**
 * Converts an object to a query string without the leading question mark (?).  Will also convert arrays directly inside
 * the object
 *
 * @param {Object} query Plain Object to convert to a query string
 * @returns {string} Query string
 */
function stringifyQuery (query) {
  return Object.entries(query).map(([key, value]) => {
    if (Array.isArray(value)) {
      return value.map((item) => {
        return `${encodeURIComponent(key)}=${encodeURIComponent(item)}`;
      }).join('&amp;');
    }
    return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;
  }).join('&amp;');
}

/**
 * A representation of a URL split into its different parts
 * @typedef {Object} URLParts
 * @property {string} href The full URL
 * @property {string} protocol The protocol of the URL
 * @property {string} host The hostname of the URL without port
 * @property {string} hostname The hostname of the URL with the port
 * @property {string} port The port of the URL
 * @property {string} pathname The pathname of the URL
 * @property {string} search The search query string of the URL
 * @property {string} hash The hash of the URL
 */

/**
 * Parses a URL into its corresponding parts
 * @param href URL to parse
 * @returns {URLParts} URL parts
 */
function parse (href) {
  const parser = new RegExp([
    '^(https?:)//', // protocol
    '(([^:/?#]*)(?::([0-9]+))?)', // host (hostname and port)
    '(/{0,1}[^?#]*)', // pathname
    '(\\?[^#]*|)', // search
    '(#.*|)$', // hash
  ].join(''));

  const match = parser.exec(href);
  if (!match) {
    return {};
  }

  const [, protocol, host, hostname, port, pathname, search, hash] = match;

  return {
    href,
    protocol,
    host,
    hostname,
    port: port || '',
    pathname,
    search,
    hash,
  };
}

/**
 * Converts a URLParts into a string URL
 * @param {URLParts} url URL parts to convert
 * @returns {string} String representation of the URL
 */
function stringify (url) {
  const { protocol, host } = url;
  if (!protocol || !host) {
    return '';
  }
  const pathname = url.pathname || '';
  let search = url.search || '';
  let hash = url.hash || '';
  if (search.length &amp;&amp; search.indexOf('?') !== 0) {
    search = `?${search}`;
  }
  if (hash.length &amp;&amp; hash.indexOf('#') !== 0) {
    hash = `#${hash}`;
  }
  return `${protocol}//${host}${pathname}${search}${hash}`;
}

module.exports = {
  toQueryString,
  isSecure,
  hasProtocol,
  ensureProtocol,
  ensureExplicitProtocol,
  parseQueryString,
  stringifyQuery,
  parse,
  stringify,
};
</code></pre>
        </article>
    </section>




</div>

    <footer>
        <img class="logo" src="https://brightcovelearning.github.io/Brightcove-API-References/brightcove-player/doc-header-image/bc-logo.png" style="width: 50px; height: 46px">
        <div class="footer-text"><span class='copyright'>Â©2018 <a href='https://brightcove.com' target='_blank'>Brightcove, Inc</a>.</div>
    </footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = '_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>
